[{"title":"Jedis - Redis的Java的应用","url":"/2021/01/20/Jedis%20-%20Redis%E4%B8%8EJava%E7%9A%84%E5%BA%94%E7%94%A8/","content":"<blockquote>\n<p>转载：<a href=\"https://blog.csdn.net/chensizheng/article/details/78309888\">Redis入门到精通-Redis与Java的应用</a></p>\n</blockquote>\n<h2 id=\"1-Jedis的使用\"><a href=\"#1-Jedis的使用\" class=\"headerlink\" title=\"1. Jedis的使用\"></a>1. Jedis的使用</h2><p>Jedis就是redis支持java的第三方类库，我们可以使用Jedis类库操作redis数据库。</p>\n<p>​ 注意:Jedis2.7以上的版本才支持集群操作。</p>\n<h3 id=\"1-1-Maven依赖\"><a href=\"#1-1-Maven依赖\" class=\"headerlink\" title=\"1.1 Maven依赖\"></a>1.1 Maven依赖</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.8.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-2-连接redis服务\"><a href=\"#1-2-连接redis服务\" class=\"headerlink\" title=\"1.2 连接redis服务\"></a>1.2 连接redis服务</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);  <span class=\"comment\">//默认端口6379 可以省略</span></span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);  <span class=\"comment\">//无密码此步可省略</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-3-Redis-Java-String-字符串\"><a href=\"#1-3-Redis-Java-String-字符串\" class=\"headerlink\" title=\"1.3 Redis Java String(字符串)\"></a>1.3 Redis Java String(字符串)</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">jedis.set(<span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;test1&quot;</span>); <span class=\"comment\">// 存数据</span></span><br><span class=\"line\">System.out.println(jedis.get(<span class=\"string\">&quot;a&quot;</span>)); <span class=\"comment\">// 取数据</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"1-4-Redis-Java-List-列表\"><a href=\"#1-4-Redis-Java-List-列表\" class=\"headerlink\" title=\"1.4 Redis Java List(列表)\"></a>1.4 Redis Java List(列表)</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\"><span class=\"comment\">//存储数据到列表中</span></span><br><span class=\"line\">jedis.lpush(<span class=\"string\">&quot;list1&quot;</span>, <span class=\"string\">&quot;Java&quot;</span>);</span><br><span class=\"line\">jedis.lpush(<span class=\"string\">&quot;list1&quot;</span>, <span class=\"string\">&quot;Html5&quot;</span>);</span><br><span class=\"line\">jedis.lpush(<span class=\"string\">&quot;list1&quot;</span>, <span class=\"string\">&quot;Python&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 获取存储的数据并输出</span></span><br><span class=\"line\">List&lt;String&gt; list = jedis.lrange(<span class=\"string\">&quot;list1&quot;</span>, <span class=\"number\">0</span> ,-<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>; i&lt;list.size(); i++) &#123;</span><br><span class=\"line\">  System.out.println(<span class=\"string\">&quot;列表项为: &quot;</span>+list.get(i));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"1-5-Redis-Java-Keys\"><a href=\"#1-5-Redis-Java-Keys\" class=\"headerlink\" title=\"1.5 Redis Java Keys\"></a>1.5 Redis Java Keys</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\"><span class=\"comment\">// 获取数据并输出</span></span><br><span class=\"line\">Set&lt;String&gt; keys = jedis.keys(<span class=\"string\">&quot;*&quot;</span>);</span><br><span class=\"line\">Iterator&lt;String&gt; it=keys.iterator() ;</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it.hasNext())&#123;</span><br><span class=\"line\">  String key = it.next();</span><br><span class=\"line\">  System.out.println(key);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-将User表放入到-Redis缓存\"><a href=\"#2-将User表放入到-Redis缓存\" class=\"headerlink\" title=\"2. 将User表放入到 Redis缓存\"></a>2. 将User表放入到 Redis缓存</h2><p> ​ t_user表数据量很大，查询很频繁，鲜有更新操作，可以把t_user表放到redis缓存中，实现t_user表的快速查询。</p>\n<p>​ 测试过程中我们用到了object转jsonString</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>fastjson<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-1-准备User-java\"><a href=\"#2-1-准备User-java\" class=\"headerlink\" title=\"2.1 准备User.java\"></a>2.1 准备User.java</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sex;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">User</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">User</span><span class=\"params\">(String id, String name, <span class=\"keyword\">int</span> age, String sex)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(String id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAge</span><span class=\"params\">(<span class=\"keyword\">int</span> age)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSex</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSex</span><span class=\"params\">(String sex)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">​</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;User&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;id=&quot;</span> + id +</span><br><span class=\"line\">                <span class=\"string\">&quot;, name=&#x27;&quot;</span> + name + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, age=&quot;</span> + age +</span><br><span class=\"line\">                <span class=\"string\">&quot;, sex=&#x27;&quot;</span> + sex + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2-将User的数据放入到Redis\"><a href=\"#2-2-将User的数据放入到Redis\" class=\"headerlink\" title=\"2.2 将User的数据放入到Redis\"></a>2.2 将User的数据放入到Redis</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">User u1 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack1&quot;</span>,<span class=\"number\">21</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">User u2 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack2&quot;</span>,<span class=\"number\">22</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">User u3 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack3&quot;</span>,<span class=\"number\">23</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">User u4 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack4&quot;</span>,<span class=\"number\">24</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">User u5 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack5&quot;</span>,<span class=\"number\">25</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">Map&lt;String,String&gt; userMap = <span class=\"keyword\">new</span> HashMap&lt;String,String&gt;();</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u1&quot;</span>,JSON.toJSONString(u1));</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u2&quot;</span>,JSON.toJSONString(u2));</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u3&quot;</span>,JSON.toJSONString(u3));</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u4&quot;</span>,JSON.toJSONString(u4));</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u5&quot;</span>,JSON.toJSONString(u5));</span><br><span class=\"line\">​</span><br><span class=\"line\">jedis.hmset(<span class=\"string\">&quot;t_user&quot;</span>,userMap);</span><br></pre></td></tr></table></figure>\n<p>到Redis数据库服务器上观察：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">1) &quot;t_user&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; hkeys t_user</span><br><span class=\"line\">1) &quot;u1&quot;</span><br><span class=\"line\">2) &quot;u3&quot;</span><br><span class=\"line\">3) &quot;u4&quot;</span><br><span class=\"line\">4) &quot;u5&quot;</span><br><span class=\"line\">5) &quot;u2&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; hvals t_user</span><br><span class=\"line\">1) &quot;&#123;\\&quot;age\\&quot;:21,\\&quot;id\\&quot;:\\&quot;740a1778-de0e-4426-b231-1f97d290b13c\\&quot;,\\&quot;name\\&quot;:\\&quot;jack1\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">2) &quot;&#123;\\&quot;age\\&quot;:23,\\&quot;id\\&quot;:\\&quot;5133d99f-b8a0-4062-8624-89a5dc5c8e89\\&quot;,\\&quot;name\\&quot;:\\&quot;jack3\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">3) &quot;&#123;\\&quot;age\\&quot;:24,\\&quot;id\\&quot;:\\&quot;f6d1a709-5f2c-4564-bec6-b8f63eef6a86\\&quot;,\\&quot;name\\&quot;:\\&quot;jack4\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">4) &quot;&#123;\\&quot;age\\&quot;:25,\\&quot;id\\&quot;:\\&quot;4c8b4122-c9f9-41b2-ba29-c0de2a257370\\&quot;,\\&quot;name\\&quot;:\\&quot;jack5\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">5) &quot;&#123;\\&quot;age\\&quot;:22,\\&quot;id\\&quot;:\\&quot;e48c6616-75c2-4d04-9e90-31b69a4632a4\\&quot;,\\&quot;name\\&quot;:\\&quot;jack2\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3-使用Redis中的User缓存数据\"><a href=\"#2-3-使用Redis中的User缓存数据\" class=\"headerlink\" title=\"2.3 使用Redis中的User缓存数据\"></a>2.3 使用Redis中的User缓存数据</h3><p>t_user表数据量大，查询缓慢，如何实现t_user表数据的快速查询；</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">​<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_user <span class=\"keyword\">where</span> age <span class=\"operator\">=</span><span class=\"number\">25</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_user <span class=\"keyword\">where</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;m&#x27;</span>；</span><br><span class=\"line\">​<span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_user <span class=\"keyword\">where</span> sex <span class=\"operator\">=</span> <span class=\"string\">&#x27;w&#x27;</span>；</span><br></pre></td></tr></table></figure>\n<p>​ 我们可以使用redis中的set类型预先设定查询结果集。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">​Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\"><span class=\"comment\">//假设现在有mybatis的三个查询操作</span></span><br><span class=\"line\"><span class=\"comment\">//userMapper.getUserListByAge(25)</span></span><br><span class=\"line\"><span class=\"comment\">//userMapper.getUserListBySex(&quot;m&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">//userMapper.getUserListBySex(&quot;f&quot;)</span></span><br><span class=\"line\">​</span><br><span class=\"line\"><span class=\"comment\">//预设查询结果集</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> String user_list_by_age_25 = <span class=\"string\">&quot;user_list_by_age_25&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">final</span> String user_list_by_sex_m = <span class=\"string\">&quot;user_list_by_sex_m&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">final</span> String user_list_by_sex_f = <span class=\"string\">&quot;user_list_by_sex_f&quot;</span>;</span><br><span class=\"line\">​</span><br><span class=\"line\"><span class=\"comment\">//在初始化redis缓存的时候,模拟预设查询结果集</span></span><br><span class=\"line\"><span class=\"comment\">// (在真正的开发中,使用mybatis二级换从数据库查询后再缓存到redis)</span></span><br><span class=\"line\"><span class=\"comment\">//定义userMap存放t_user表的所有数据</span></span><br><span class=\"line\">Map&lt;String,String&gt; userMap = <span class=\"keyword\">new</span> HashMap&lt;String,String&gt;();</span><br><span class=\"line\">​</span><br><span class=\"line\">User u1 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack&quot;</span>,<span class=\"number\">21</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u1&quot;</span>,JSON.toJSONString(u1));</span><br><span class=\"line\"><span class=\"comment\">//u1 满足性别为m的条件,即u1为userMapper.getUserListBySex(&quot;m&quot;)的查询结果集</span></span><br><span class=\"line\">jedis.sadd(user_list_by_sex_m,<span class=\"string\">&quot;u1&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">User u2 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;rose&quot;</span>,<span class=\"number\">25</span>,<span class=\"string\">&quot;f&quot;</span>);</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u2&quot;</span>,JSON.toJSONString(u2));</span><br><span class=\"line\"><span class=\"comment\">//u2 满足sex=&#x27;f&#x27;  age=25</span></span><br><span class=\"line\">jedis.sadd(user_list_by_sex_f,<span class=\"string\">&quot;u2&quot;</span>);</span><br><span class=\"line\">jedis.sadd(user_list_by_age_25,<span class=\"string\">&quot;u2&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">User u3 = <span class=\"keyword\">new</span> User(UUID.randomUUID().toString(),<span class=\"string\">&quot;jack3&quot;</span>,<span class=\"number\">23</span>,<span class=\"string\">&quot;m&quot;</span>);</span><br><span class=\"line\">userMap.put(<span class=\"string\">&quot;u3&quot;</span>,JSON.toJSONString(u3));</span><br><span class=\"line\"><span class=\"comment\">//u3 满足sex=&#x27;m&#x27;</span></span><br><span class=\"line\">jedis.sadd(user_list_by_sex_m,<span class=\"string\">&quot;u3&quot;</span>);</span><br><span class=\"line\">​</span><br><span class=\"line\">jedis.hmset(<span class=\"string\">&quot;t_user&quot;</span>,userMap);</span><br></pre></td></tr></table></figure>\n<p>Redis服务器结果：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; keys *</span><br><span class=\"line\">1) &quot;user_list_by_age_25&quot;</span><br><span class=\"line\">2) &quot;user_list_by_sex_m&quot;</span><br><span class=\"line\">3) &quot;t_user&quot;</span><br><span class=\"line\">4) &quot;user_list_by_sex_f&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; hkeys t_user</span><br><span class=\"line\">1) &quot;u1&quot;</span><br><span class=\"line\">2) &quot;u2&quot;</span><br><span class=\"line\">3) &quot;u3&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; hvals t_user</span><br><span class=\"line\">1) &quot;&#123;\\&quot;age\\&quot;:21,\\&quot;id\\&quot;:\\&quot;65224362-26b7-4858-9dfd-6c8df8d0dcce\\&quot;,\\&quot;name\\&quot;:\\&quot;jack\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">2) &quot;&#123;\\&quot;age\\&quot;:25,\\&quot;id\\&quot;:\\&quot;cd23782e-90a5-4c80-8c31-d0c874e623f6\\&quot;,\\&quot;name\\&quot;:\\&quot;rose\\&quot;,\\&quot;sex\\&quot;:\\&quot;f\\&quot;&#125;&quot;</span><br><span class=\"line\">3) &quot;&#123;\\&quot;age\\&quot;:23,\\&quot;id\\&quot;:\\&quot;e5bb2423-c821-4267-b77c-0abef4777113\\&quot;,\\&quot;name\\&quot;:\\&quot;jack3\\&quot;,\\&quot;sex\\&quot;:\\&quot;m\\&quot;&#125;&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; smembers user_list_by_age_25</span><br><span class=\"line\">1) &quot;u2&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; smembers user_list_by_sex_m</span><br><span class=\"line\">1) &quot;u1&quot;</span><br><span class=\"line\">2) &quot;u3&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt; smembers user_list_by_sex_f</span><br><span class=\"line\">1) &quot;u2&quot;</span><br><span class=\"line\">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>\n<p>​ 这样在程序中userMapper.getUserListByAge(25)就可以通过从redis服务器上获得user_list_by_age_25数据进行使用。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;10.0.31.144&quot;</span>,<span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.auth(<span class=\"string\">&quot;redis&quot;</span>);</span><br><span class=\"line\">Set&lt;String&gt; userlist = jedis.smembers(<span class=\"string\">&quot;user_list_by_sex_m&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span>(String u : userlist)&#123;</span><br><span class=\"line\">           <span class=\"comment\">//拿到对对应ser的json字符串</span></span><br><span class=\"line\">    System.out.println(jedis.hget(<span class=\"string\">&quot;t_user&quot;</span>,u));</span><br><span class=\"line\">           <span class=\"comment\">//...这里可以再使用json转object方法</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":["教程"],"tags":["Redis","Jedis"]},{"title":"Hello World","url":"/2021/01/20/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"Redis搭建及使用","url":"/2021/01/20/redis-build/","content":"<h2 id=\"Docker-安装-Redis\"><a href=\"#Docker-安装-Redis\" class=\"headerlink\" title=\"Docker 安装 Redis\"></a>Docker 安装 Redis</h2><ol>\n<li><p>系统环境：16.04.1-Ubuntu<br> <code>uname -a</code></p>\n</li>\n<li><p>获取 Redis 镜像<br> <code>docker images #检查是否存在redis镜像</code></p>\n</li>\n</ol>\n<ul>\n<li>若已存在镜像<br>  <code>docker ps -a -q #查看镜像是否在运行</code><br>  <code>docker exec -it redis_test redis-server -v  #redis_test 是运行redis名称</code></li>\n<li>若不存在镜像<br>  <code>docker search redis #查看redis版本</code><br>  <code>docker pull redis:latest #获取最新redis版本</code></li>\n</ul>\n<ol start=\"3\">\n<li><p>启动 Redis<br> <code>docker run -d -p 6379:6379 --name redis_test --restart=always redis #启动一个简单的redis服务</code><br> <code>docker run -d -p 6379:6379 --name redis_test -v /usr/local/redis/redis.conf:/etc/redis/redis.conf --restart=always redis redis-server /etc/redis/redis.conf #配置文件见附件一</code></p>\n<ul>\n<li>-d 后台运行</li>\n<li>–restart=always #开机自启</li>\n<li>-v #挂载路径：/usr/local/redis/redis.conf</li>\n<li>redis-server #以配置文件(/etc/redis/redis.conf)方式启动，配合-v使用;<br><font color = red face=\"STCAIYUN\">配置文件注意事项：</li>\n<li>bind 127.0.0.1 #注释掉这部分(同时protected-mode no)，这是限制redis只能本地访问</li>\n<li>dir ./ #存放路径，（同时appendonly yes） #持久化搭配使用</li>\n<li>protected-mode no #默认yes，开启保护模式，限制为本地访问</li>\n<li>daemonize no#默认no，改为yes意为以守护进程方式启动，可后台运行，除非kill进程（可选），改为yes会使配置文件方式启动redis失败</font>\n</li>\n</ul>\n</li>\n<li><p>测试<br><code>docker exec -it redis_test redis-cli</code><br><code>auth 123456</code></p>\n</li>\n<li><p>外部连接<br> 软件：Another Redis Desktop Manager<br> 下载：<a href=\"https://github.com/qishibo/AnotherRedisDesktopManager/releases\">Gitee</a>    <a href=\"https://github.com/qishibo/AnotherRedisDesktopManager/releases\">Github</a></p>\n<p> <img src=\"http://106.14.190.5:9990/withyou/20899807845855232.jpg\" alt=\"Another Redis Desktop Manager\" title=\"Another Redis Desktop Manager\"><br> Redis Desktop Manager 免费版不支持SSH连接</p>\n</li>\n</ol>\n<h2 id=\"Redis常用命令及Java使用\"><a href=\"#Redis常用命令及Java使用\" class=\"headerlink\" title=\"Redis常用命令及Java使用\"></a>Redis常用命令及Java使用</h2><ol>\n<li>命令行  <ul>\n<li>开启redis，进入命令行界面</li>\n<li>设置缓存：set key value  </li>\n<li>获取缓存：get key  </li>\n<li>设置过期时间：setex key 失效时间(s) value  </li>\n<li>删除缓存：del key </li>\n</ul>\n</li>\n<li>工具使用 Redis</li>\n<li>Java  <ul>\n<li>添加 pom.xml<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.2.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>application配置信息  <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">redis:</span><br><span class=\"line\"> database: 0</span><br><span class=\"line\"> host: 127.0.0.1</span><br><span class=\"line\"> port: 6379</span><br><span class=\"line\"> password: # 如果未单独配置默认为空即可</span><br><span class=\"line\"> timeout: 1000</span><br><span class=\"line\"> jedis:</span><br><span class=\"line\">   pool:</span><br><span class=\"line\">     max-active: 8</span><br><span class=\"line\">     max-wait: -1</span><br><span class=\"line\">     max-idle: 8</span><br><span class=\"line\">     min-idle: 0</span><br></pre></td></tr></table></figure></li>\n<li>jedis配置类<br><a href=\"https://blog.csdn.net/chensizheng/article/details/78309888,Jedis%E4%B9%8BJava%E5%BA%94%E7%94%A8\">Jedis - Redis与Java的应用</a><br>整合springboot<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@EnableCaching</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisConfig</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;spring.redis.host&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String host;</span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;spring.redis.database&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer database;</span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;spring.redis.port&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer port;</span><br><span class=\"line\">    <span class=\"meta\">@Value(&quot;$&#123;spring.redis.password&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String pwd;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean(name = &quot;jedisPoolConfig&quot;)</span></span><br><span class=\"line\">    <span class=\"meta\">@ConfigurationProperties(prefix = &quot;spring.redis.pool&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> JedisPoolConfig <span class=\"title\">jedisPoolConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        JedisPoolConfig jedisPoolConfig = <span class=\"keyword\">new</span> JedisPoolConfig();</span><br><span class=\"line\">        jedisPoolConfig.setMaxWaitMillis(<span class=\"number\">10000</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> jedisPoolConfig;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> RedisConnectionFactory <span class=\"title\">redisConnectionFactory</span><span class=\"params\">(JedisPoolConfig jedisPoolConfig)</span> </span>&#123;</span><br><span class=\"line\">        RedisStandaloneConfiguration redisStandaloneConfiguration = <span class=\"keyword\">new</span> RedisStandaloneConfiguration();</span><br><span class=\"line\">        redisStandaloneConfiguration.setHostName(host);</span><br><span class=\"line\">        redisStandaloneConfiguration.setDatabase(database);</span><br><span class=\"line\">        redisStandaloneConfiguration.setPassword(pwd);</span><br><span class=\"line\">        redisStandaloneConfiguration.setPort(port);</span><br><span class=\"line\">        JedisClientConfiguration.JedisPoolingClientConfigurationBuilder jpcb = (JedisClientConfiguration.JedisPoolingClientConfigurationBuilder) JedisClientConfiguration.builder();</span><br><span class=\"line\">        jpcb.poolConfig(jedisPoolConfig);</span><br><span class=\"line\">        JedisClientConfiguration jedisClientConfiguration = jpcb.build();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> JedisConnectionFactory(redisStandaloneConfiguration, jedisClientConfiguration);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 配置redisTemplate针对不同key和value场景下不同序列化的方式</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> factory Redis连接工厂</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Primary</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean(name = &quot;redisTemplate&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> RedisTemplate&lt;String, Object&gt; <span class=\"title\">redisTemplate</span><span class=\"params\">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class=\"line\">        RedisTemplate&lt;String, Object&gt; template = <span class=\"keyword\">new</span> RedisTemplate&lt;&gt;();</span><br><span class=\"line\">        template.setConnectionFactory(factory);</span><br><span class=\"line\">        StringRedisSerializer stringRedisSerializer = <span class=\"keyword\">new</span> StringRedisSerializer();</span><br><span class=\"line\">        template.setKeySerializer(stringRedisSerializer);</span><br><span class=\"line\">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class=\"line\">        Jackson2JsonRedisSerializer redisSerializer = <span class=\"keyword\">new</span> Jackson2JsonRedisSerializer(Object.class);</span><br><span class=\"line\">        template.setValueSerializer(redisSerializer);</span><br><span class=\"line\">        template.setHashValueSerializer(redisSerializer);</span><br><span class=\"line\">        template.afterPropertiesSet();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> template;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\">IGlobalCache <span class=\"title\">cache</span><span class=\"params\">(RedisTemplate redisTemplate)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AppRedisCacheManager(redisTemplate);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\nredisTemplate封装  <figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 系统全局Cache接口，具体缓存方式需要实现该接口</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> YuXD</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2021-01-05 10:38</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since</span> v1.0</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">IGlobalCache</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 指定缓存失效时间</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time 时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">expire</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 时间(秒) 返回0代表为永久有效</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">getExpire</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 判断key是否存在</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 存在 false不存在</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hasKey</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 可以传一个值 或多个</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">del</span><span class=\"params\">(String... key)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// ============================String=============================</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 普通缓存获取</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 值</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">get</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 普通缓存放入</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true成功 false失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">set</span><span class=\"params\">(String key, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 普通缓存放入并设置时间</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒) time要大于0 如果time小于等于0 将设置无限期</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true成功 false 失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">set</span><span class=\"params\">(String key, Object value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 递增</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delta 要增加几(大于0)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">incr</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> delta)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 递减</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delta 要减少几(小于0)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">decr</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> delta)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * HashGet</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item 项 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 值</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">hget</span><span class=\"params\">(String key, String item)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取hashKey对应的所有键值</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 对应的多个键值</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Map&lt;Object, Object&gt; <span class=\"title\">hmget</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * HashSet</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> map 对应多个键值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 成功 false 失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hmset</span><span class=\"params\">(String key, Map&lt;String, Object&gt; map)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * HashSet 并设置时间</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> map  对应多个键值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time 时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true成功 false失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hmset</span><span class=\"params\">(String key, Map&lt;String, Object&gt; map, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 向一张hash表中放入数据,如果不存在将创建</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item  项</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 成功 false失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hset</span><span class=\"params\">(String key, String item, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 向一张hash表中放入数据,如果不存在将创建</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item  项</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒) 注意:如果已存在的hash表有时间,这里将会替换原有的时间</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 成功 false失败</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hset</span><span class=\"params\">(String key, String item, Object value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除hash表中的值</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item 项 可以使多个 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">hdel</span><span class=\"params\">(String key, Object... item)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 判断hash表中是否有该项的值</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item 项 不能为null</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 存在 false不存在</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">hHasKey</span><span class=\"params\">(String key, String item)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * hash递增 如果不存在,就会创建一个 并把新增后的值返回</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item 项</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> by   要增加几(大于0)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">hincr</span><span class=\"params\">(String key, String item, <span class=\"keyword\">double</span> by)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * hash递减</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key  键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> item 项</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> by   要减少记(小于0)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">hdecr</span><span class=\"params\">(String key, String item, <span class=\"keyword\">double</span> by)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据key获取Set中的所有值</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Set&lt;Object&gt; <span class=\"title\">sGet</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据value从一个set中查询,是否存在</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true 存在 false不存在</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">sHasKey</span><span class=\"params\">(String key, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将数据放入set缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key    键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> values 值 可以是多个</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 成功个数</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">sSet</span><span class=\"params\">(String key, Object... values)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将set数据放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key    键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time   时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> values 值 可以是多个</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 成功个数</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">sSetAndTime</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> time, Object... values)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取set缓存的长度</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">sGetSetSize</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 移除值为value的</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key    键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> values 值 可以是多个</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 移除的个数</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">setRemove</span><span class=\"params\">(String key, Object... values)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取list缓存的内容</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> start 开始</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> end   结束 0 到 -1代表所有值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;Object&gt; <span class=\"title\">lGet</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> start, <span class=\"keyword\">long</span> end)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取list缓存的长度</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key 键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">lGetListSize</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 通过索引 获取list中的值</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> index 索引 index&gt;=0时， 0 表头，1 第二个元素，依次类推；index&lt;0时，-1，表尾，-2倒数第二个元素，依次类推</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">Object <span class=\"title\">lGetIndex</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> index)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">lSet</span><span class=\"params\">(String key, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">lSet</span><span class=\"params\">(String key, Object value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">lSetAll</span><span class=\"params\">(String key, List&lt;Object&gt; value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">lSetAll</span><span class=\"params\">(String key, List&lt;Object&gt; value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">rSet</span><span class=\"params\">(String key, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">rSet</span><span class=\"params\">(String key, Object value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">rSetAll</span><span class=\"params\">(String key, List&lt;Object&gt; value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 将list放入缓存</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> time  时间(秒)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">rSetAll</span><span class=\"params\">(String key, List&lt;Object&gt; value, <span class=\"keyword\">long</span> time)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据索引修改list中的某条数据</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> index 索引</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">lUpdateIndex</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> index, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 移除N个值为value</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key   键</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> count 移除多少个</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> value 值</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 移除的个数</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">long</span> <span class=\"title\">lRemove</span><span class=\"params\">(String key, <span class=\"keyword\">long</span> count, Object value)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 从redis集合中移除[start,end]之间的元素</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> key</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> stard</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> end</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">rangeRemove</span><span class=\"params\">(String key, Long stard, Long end)</span></span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 返回当前redisTemplate</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">RedisTemplate <span class=\"title\">getRedisTemplate</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"附件一-配置文件-redis-conf\"><a href=\"#附件一-配置文件-redis-conf\" class=\"headerlink\" title=\"附件一 配置文件 redis.conf\"></a>附件一 配置文件 redis.conf</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">protected-mode no</span><br><span class=\"line\">port 6379</span><br><span class=\"line\">tcp-backlog 511</span><br><span class=\"line\">timeout 0</span><br><span class=\"line\">tcp-keepalive 0</span><br><span class=\"line\">loglevel notice</span><br><span class=\"line\">logfile &quot;&quot;</span><br><span class=\"line\">databases 16</span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">rdbchecksum yes</span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\">dir .&#x2F;</span><br><span class=\"line\">slave-serve-stale-data yes</span><br><span class=\"line\">slave-read-only yes</span><br><span class=\"line\">repl-diskless-sync no</span><br><span class=\"line\">repl-diskless-sync-delay 5</span><br><span class=\"line\">repl-disable-tcp-nodelay no</span><br><span class=\"line\">slave-priority 100</span><br><span class=\"line\">appendonly no</span><br><span class=\"line\">appendfilename &quot;appendonly.aof&quot;</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb</span><br><span class=\"line\">aof-load-truncated yes</span><br><span class=\"line\">lua-time-limit 5000</span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\">slowlog-max-len 128</span><br><span class=\"line\">latency-monitor-threshold 0</span><br><span class=\"line\">notify-keyspace-events &quot;&quot;</span><br><span class=\"line\">hash-max-ziplist-entries 512</span><br><span class=\"line\">hash-max-ziplist-value 64</span><br><span class=\"line\">list-max-ziplist-size -2</span><br><span class=\"line\">list-compress-depth 0</span><br><span class=\"line\">set-max-intset-entries 512</span><br><span class=\"line\">zset-max-ziplist-entries 128</span><br><span class=\"line\">zset-max-ziplist-value 64</span><br><span class=\"line\">hll-sparse-max-bytes 3000</span><br><span class=\"line\">activerehashing yes</span><br><span class=\"line\">client-output-buffer-limit normal 0 0 0</span><br><span class=\"line\">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class=\"line\">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class=\"line\">hz 10</span><br><span class=\"line\">aof-rewrite-incremental-fsync yes</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n","categories":["教程"],"tags":["Redis","Docker"]}]